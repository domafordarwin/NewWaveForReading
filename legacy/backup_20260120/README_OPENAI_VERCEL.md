# OpenAIκ°€ Vercelμ—μ„ μ‘λ™ν•μ§€ μ•λ” μ΄μ 

## π― ν•µμ‹¬ μ”μ•½

**λ¬Έμ :** λ΅μ»¬μ—μ„λ” OpenAIκ°€ μ •μƒ μ‘λ™ν•μ§€λ§, Vercel λ°°ν¬ ν™κ²½μ—μ„λ” μ‘λ™ν•μ§€ μ•μ

**μ›μΈ:** Vercelμ— ν™κ²½ λ³€μ(`VITE_OPENAI_API_KEY`)κ°€ μ„¤μ •λμ§€ μ•μ

**ν•΄κ²°:** Vercel Dashboardμ—μ„ ν™κ²½ λ³€μ μ¶”κ°€ ν›„ μ¬λ°°ν¬

---

## β… ν„μ¬ μƒνƒ ν™•μΈ

### λ΅μ»¬ ν™κ²½ (μ‘λ™ν•¨ β…)
- β… `.env` νμΌμ— `VITE_OPENAI_API_KEY` μ„¤μ •λ¨
- β… OpenAI API μ—°κ²° ν…μ¤νΈ μ„±κ³µ
- β… AI λ¬Έν•­ μƒμ„± μ •μƒ μ‘λ™

### Vercel ν™κ²½ (μ‘λ™ μ• ν•¨ β)
- β ν™κ²½ λ³€μκ°€ Vercelμ— μ„¤μ •λμ§€ μ•μ
- β μ‹λ®¬λ μ΄μ… λ¨λ“λ΅ μ‘λ™ (λ”λ―Έ λ°μ΄ν„° μƒμ„±)
- β μ‹¤μ  AI λ¬Έν•­ μƒμ„± λ¶κ°€

---

## π” μ™ Vercelμ—μ„ μ‘λ™ν•μ§€ μ•λ”κ°€?

### ν™κ²½ λ³€μ κ΄€λ¦¬μ μ°¨μ΄

**λ΅μ»¬ κ°λ°:**
```
ν”„λ΅μ νΈ ν΄λ”
β”β”€β”€ frontend/
β”‚   β”β”€β”€ .env          β† μ—¬κΈ°μ— API ν‚¤ μ €μ¥
β”‚   β””β”€β”€ src/
β””β”€β”€ ...
```
- `.env` νμΌμ—μ„ ν™κ²½ λ³€μ λ΅λ“
- Viteκ°€ λΉλ“ μ‹ `VITE_` μ ‘λ‘μ‚¬ λ³€μλ¥Ό λ²λ“¤μ— ν¬ν•¨
- μ •μƒ μ‘λ™ β…

**Vercel λ°°ν¬:**
```
GitHub Repository
β”β”€β”€ frontend/
β”‚   β”β”€β”€ .env          β† β οΈ Gitμ— μ»¤λ°‹λμ§€ μ•μ (.gitignore)
β”‚   β””β”€β”€ src/
β””β”€β”€ ...
        β†“
   Vercel Build
        β†“
   ν™κ²½ λ³€μ μ—†μ β
```
- `.env` νμΌμ€ λ³΄μ•μƒ Gitμ— μ»¤λ°‹λμ§€ μ•μ
- Vercelμ€ `.env` νμΌμ— μ ‘κ·Όν•  μ μ—†μ
- **ν™κ²½ λ³€μλ¥Ό Vercel Dashboardμ—μ„ λ³„λ„λ΅ μ„¤μ •ν•΄μ•Ό ν•¨**

---

## π€ ν•΄κ²° λ°©λ²• (λ‹¨κ³„λ³„)

### Step 1: Vercel Dashboardμ—μ„ ν™κ²½ λ³€μ μ„¤μ •

1. **Vercel Dashboard μ ‘μ†**
   - https://vercel.com/dashboard

2. **ν”„λ΅μ νΈ μ„ νƒ**
   - NewWaveForReading_final (λλ” ν•΄λ‹Ή ν”„λ΅μ νΈλ…)

3. **Settings νƒ­ ν΄λ¦­**

4. **Environment Variables λ©”λ‰΄ μ„ νƒ** (μ™Όμ½)

5. **Add λ²„νΌ ν΄λ¦­ν•μ—¬ λ‹¤μ λ³€μλ“¤ μ¶”κ°€:**

#### ν•„μ ν™κ²½ λ³€μ:

```plaintext
Name: VITE_OPENAI_API_KEY
Value: sk-proj-YOUR_OPENAI_API_KEY_HERE
Environments: β… Production β… Preview β… Development
```

```plaintext
Name: VITE_SUPABASE_URL
Value: https://aaxqoufnovhxargysfty.supabase.co
Environments: β… Production β… Preview β… Development
```

```plaintext
Name: VITE_SUPABASE_ANON_KEY
Value: your-supabase-anon-key-here
Environments: β… Production β… Preview β… Development
```

**μ¤‘μ”:**
- ν™κ²½ λ³€μ μ΄λ¦„μ„ μ •ν™•ν μ…λ ¥ (λ€μ†λ¬Έμ κµ¬λ¶„)
- λ¨λ“  ν™κ²½(Production, Preview, Development)μ— μ²΄ν¬
- κ°’ λ³µμ‚¬ μ‹ μ•λ’¤ κ³µλ°± μ—†μ΄

### Step 2: μ¬λ°°ν¬ (μ¤‘μ”!)

ν™κ²½ λ³€μλ¥Ό μ¶”κ°€ν• ν›„ **λ°λ“μ‹ μ¬λ°°ν¬**ν•΄μ•Ό ν•©λ‹λ‹¤.

**λ°©λ²• 1: Vercel Dashboardμ—μ„ μ¬λ°°ν¬**
1. **Deployments** νƒ­μΌλ΅ μ΄λ™
2. μµμ‹  λ°°ν¬ μ°ΎκΈ°
3. μ¤λ¥Έμ½ `Β·Β·Β·` λ©”λ‰΄ ν΄λ¦­
4. **Redeploy** μ„ νƒ
5. β οΈ **"Use existing Build Cache" μ²΄ν¬ ν•΄μ ** (λ§¤μ° μ¤‘μ”!)
6. **Redeploy** λ²„νΌ ν΄λ¦­
7. λ°°ν¬ μ™„λ£ λ€κΈ° (λ³΄ν†µ 1-3λ¶„)

**λ°©λ²• 2: Git Pushλ΅ μ¬λ°°ν¬**
```bash
# μ•„λ¬΄ λ³€κ²½μ΄λ‚ μ»¤λ°‹
git add .
git commit -m "Trigger redeploy for env vars"
git push
```

### Step 3: ν™•μΈ

1. **λ°°ν¬ μ™„λ£ ν›„ μ‚¬μ΄νΈ μ ‘μ†**
   - https://your-project.vercel.app

2. **/diagnostics νμ΄μ§€ μ ‘μ†**
   - https://your-project.vercel.app/diagnostics

3. **"μ§„λ‹¨ μ‹μ‘" λ²„νΌ ν΄λ¦­**

4. **κ²°κ³Ό ν™•μΈ:**
   - β… λ¨λ“  ν•­λ©μ΄ λ…Ήμƒ‰ = μ„±κ³µ!
   - β λΉ¨κ°„μƒ‰μ΄ μμΌλ©΄ = μ•„λ νΈλ¬λΈ”μν… μ°Έμ΅°

---

## π”§ λΈλΌμ°μ €μ—μ„ μ§μ ‘ ν™•μΈν•λ” λ°©λ²•

λ°°ν¬λ Vercel μ‚¬μ΄νΈμ—μ„:

1. **F12** λλ¬ κ°λ°μ λ„κµ¬ μ—΄κΈ°
2. **Console** νƒ­μΌλ΅ μ΄λ™
3. λ‹¤μ λ…λ Ήμ–΄ μ…λ ¥:

```javascript
// ν™κ²½ λ³€μ ν™•μΈ
console.log('OpenAI Key:', import.meta.env.VITE_OPENAI_API_KEY ? 'β… μμ' : 'β μ—†μ');
console.log('Supabase URL:', import.meta.env.VITE_SUPABASE_URL ? 'β… μμ' : 'β μ—†μ');

// μ „μ²΄ ν™κ²½ λ³€μ μ¶λ ¥
console.log('μ „μ²΄ ν™κ²½:', import.meta.env);
```

**μμƒ κ²°κ³Ό:**
```
OpenAI Key: β… μμ
Supabase URL: β… μμ
μ „μ²΄ ν™κ²½: {
  MODE: "production",
  BASE_URL: "/",
  VITE_OPENAI_API_KEY: "sk-proj-YOUR_OPENAI_API_KEY_HERE...",
  VITE_SUPABASE_URL: "https://...",
  ...
}
```

λ§μ•½ `β μ—†μ`μ΄ λ‚μ¨λ‹¤λ©΄:
- ν™κ²½ λ³€μκ°€ Vercelμ— μ„¤μ •λμ§€ μ•μ•κ±°λ‚
- μ¬λ°°ν¬λ¥Ό ν•μ§€ μ•μ•κ±°λ‚
- λΉλ“ μΊμ‹λ¥Ό μ‚¬μ©ν•μ—¬ μ¬λ°°ν¬ν• κ²½μ°

---

## π¬ μ‹¤μ  AI λ¬Έν•­ μƒμ„± ν…μ¤νΈ

ν™κ²½ λ³€μ μ„¤μ • ν›„:

1. **λ΅κ·ΈμΈ** (λ¬Έν•­ κ°λ° κµμ‚¬ κ³„μ •)
2. **λ¬Έν•­ κ°λ° β†’ ν”„λ΅μ νΈ μ„ νƒ**
3. **λ¬Έν•­ κ΄€λ¦¬ νƒ­**
4. **AI λ¬Έν•­ μƒμ„± λ²„νΌ** ν΄λ¦­
5. **μ„¤μ •:**
   - μ§€λ¬Έ μ„ νƒ
   - λ¬Έν•­ μ ν•: λ‹¨μΌ μ„ νƒ κ°κ΄€μ‹
   - μƒμ„± κ°μ: 3κ°
6. **λ¬Έν•­ μƒμ„± λ²„νΌ** ν΄λ¦­

**μμƒ κ²°κ³Ό:**

**ν™κ²½ λ³€μ μμ„ λ• (μ •μƒ):**
```
β… AI λ¬Έν•­ μ΄μ• 3κ°κ°€ μƒμ„±λμ—μµλ‹λ‹¤.
β†’ μ‹¤μ  GPT-4κ°€ μƒμ„±ν• κ³ ν’μ§ λ¬Έν•­
β†’ μ§€λ¬Έ λ‚΄μ©μ„ λ¶„μ„ν• λ§μ¶¤ν• λ¬Έν•­
β†’ μ •κµν• μ„ νƒμ§€μ™€ ν•΄μ„¤
```

**ν™κ²½ λ³€μ μ—†μ„ λ• (μ‹λ®¬λ μ΄μ…):**
```
β οΈ AI λ¬Έν•­ μ΄μ• 3κ°κ°€ μƒμ„±λμ—μµλ‹λ‹¤.
β†’ "[AI μƒμ„± 1] ..." ν•μ‹μ λ”λ―Έ λ¬Έν•­
β†’ μΌλ°μ μΈ ν…ν”λ¦Ώ λ¬Έν•­
β†’ μ§€λ¬Έ λ‚΄μ©κ³Ό λ¬΄κ΄€ν• μƒν”
```

---

## π“ μ§„λ‹¨ λ„κµ¬

### 1. μ§„λ‹¨ νμ΄μ§€
- **URL:** `/diagnostics`
- **κΈ°λ¥:**
  - ν™κ²½ λ³€μ ν™•μΈ
  - OpenAI API μ—°κ²° ν…μ¤νΈ
  - μƒμ„Έν• μ¤λ¥ μ •λ³΄ ν‘μ‹

### 2. ν™κ²½ μ²΄ν¬ μ¤ν¬λ¦½νΈ
```bash
node check-vercel-env.js
```

### 3. λ΅μ»¬ λΉλ“ ν…μ¤νΈ
```bash
cd frontend
npm run build
npm run preview
# http://localhost:4173 μ ‘μ†
```

---

## π› νΈλ¬λΈ”μν…

μμ„Έν• νΈλ¬λΈ”μν…μ€ λ‹¤μ λ¬Έμ„ μ°Έμ΅°:
- [VERCEL_TROUBLESHOOTING.md](./VERCEL_TROUBLESHOOTING.md)

**μμ£Ό λ°μƒν•λ” λ¬Έμ :**

### 1. ν™κ²½ λ³€μλ¥Ό μ¶”κ°€ν–λ”λ°λ„ μ‘λ™ μ• ν•¨
β†’ **μ¬λ°°ν¬ μ‹ λΉλ“ μΊμ‹λ¥Ό μ‚¬μ©ν•μ§€ μ•μ•λ”μ§€ ν™•μΈ**
β†’ "Use existing Build Cache" μ²΄ν¬ ν•΄μ  ν›„ μ¬λ°°ν¬

### 2. λ³€μλ… μ¤νƒ€
β†’ μ •ν™•ν: `VITE_OPENAI_API_KEY` (λ€μ†λ¬Έμ μ •ν™•ν)
β†’ `VITE_` μ ‘λ‘μ‚¬ ν•„μ

### 3. ν™κ²½ λ²”μ„ λ―Έμ„¤μ •
β†’ Production, Preview, Development **λ¨λ‘** μ„ νƒ

### 4. API ν‚¤ μ¤λ¥
β†’ OpenAI Dashboardμ—μ„ ν‚¤ ν™•μΈ
β†’ κ³µλ°± μ—†μ΄ μ •ν™•ν λ³µμ‚¬

---

## π” λ³΄μ• μ°Έκ³ μ‚¬ν•­

**ν„μ¬ κµ¬μ΅°μ λ³΄μ• μ΄μ:**
- `VITE_` μ ‘λ‘μ‚¬ λ³€μλ” ν΄λΌμ΄μ–ΈνΈ λ²λ“¤μ— ν¬ν•¨λ¨
- λΈλΌμ°μ €μ—μ„ API ν‚¤ ν™•μΈ κ°€λ¥ (F12 β†’ Console)
- μ•…μμ  μ‚¬μ©μκ°€ API ν‚¤λ¥Ό νƒμ·¨ν•  μ μμ

**ν”„λ΅λ•μ… κ¶μ¥ κµ¬μ΅°:**
```
Client β†’ Backend API β†’ OpenAI API
              β†‘
        API ν‚¤ μ¨κΉ€ λ³΄κ΄€
```

**κ°μ„  λ°©μ•:**
1. λ°±μ—”λ“ API μ—”λ“ν¬μΈνΈ μƒμ„±
2. μ„λ²„μ—μ„λ§ OpenAI νΈμ¶
3. Rate limiting μ μ©
4. μ‚¬μ©μ μΈμ¦ λ° κ¶ν• κ΄€λ¦¬

---

## π“ κ΄€λ ¨ νμΌ

- **ν™κ²½ λ³€μ μμ‹:** `frontend/.env.example`
- **OpenAI μ„λΉ„μ¤:** `frontend/src/services/openaiService.ts`
- **AI μƒμ„± ν›…:** `frontend/src/hooks/useAIGeneration.ts`
- **μ§„λ‹¨ νμ΄μ§€:** `frontend/src/pages/DiagnosticsPage.tsx`
- **Vercel μ„¤μ •:** `frontend/vercel.json`

---

## π― μ²΄ν¬λ¦¬μ¤νΈ

Vercelμ—μ„ OpenAIλ¥Ό μ‘λ™μ‹ν‚¤λ ¤λ©΄:

- [ ] Vercel Dashboard β†’ Settings β†’ Environment Variables μ ‘μ†
- [ ] `VITE_OPENAI_API_KEY` μ¶”κ°€ (κ°’μ€ λ΅μ»¬ .env νμΌμ—μ„ λ³µμ‚¬)
- [ ] `VITE_SUPABASE_URL` μ¶”κ°€
- [ ] `VITE_SUPABASE_ANON_KEY` μ¶”κ°€
- [ ] κ° λ³€μλ§λ‹¤ Production, Preview, Development λ¨λ‘ μ„ νƒ
- [ ] Deployments β†’ Redeploy (λΉλ“ μΊμ‹ μ‚¬μ© μ• ν•¨)
- [ ] λ°°ν¬ μ™„λ£ λ€κΈ° (1-3λ¶„)
- [ ] `/diagnostics` νμ΄μ§€ μ ‘μ†ν•μ—¬ ν™•μΈ
- [ ] AI λ¬Έν•­ μƒμ„± ν…μ¤νΈ

---

## π’΅ ν•µμ‹¬ ν¬μΈνΈ

1. **.env νμΌμ€ Gitμ— ν¬ν•¨λμ§€ μ•μ**
2. **Vercelμ€ .env νμΌμ„ μ½μ„ μ μ—†μ**
3. **Vercel Dashboardμ—μ„ ν™κ²½ λ³€μλ¥Ό λ³„λ„λ΅ μ„¤μ •ν•΄μ•Ό ν•¨**
4. **ν™κ²½ λ³€μ μ¶”κ°€/λ³€κ²½ ν›„ λ°λ“μ‹ μ¬λ°°ν¬**
5. **μ¬λ°°ν¬ μ‹ λΉλ“ μΊμ‹λ¥Ό μ‚¬μ©ν•λ©΄ μ• λ¨**

---

## π“ μ¶”κ°€ μ§€μ›

λ¨λ“  λ°©λ²•μ„ μ‹λ„ν•΄λ„ μ‘λ™ν•μ§€ μ•λ”λ‹¤λ©΄:

1. **μ§„λ‹¨ νμ΄μ§€ κ²°κ³Ό** μ¤ν¬λ¦°μƒ·
2. **Vercel ν™κ²½ λ³€μ μ„¤μ •** μ¤ν¬λ¦°μƒ· (κ°’μ€ κ°€λ¦¬κΈ°)
3. **λΈλΌμ°μ € μ½μ†”** μ—λ¬ λ©”μ‹μ§€
4. **Vercel λ°°ν¬ λ΅κ·Έ** (Building μ„Ήμ…)

μ„ μ •λ³΄μ™€ ν•¨κ» μ΄μ λ¦¬ν¬νΈ μ‘μ„±
